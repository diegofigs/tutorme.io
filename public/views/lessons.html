<div id="lessonsView" class="section white z-depth-1" xmlns:X-Frame-Options="http://www.w3.org/1999/xhtml">
    <div class="container" >
        <h3>Calculus 1</h3>
        <!--   Icon Section   -->

        <div class="row">
            <div class="col s12 m4 ">
                <div class="row ">

                    <H4 class="col 6">Lessons </H4>
                    <!--Done-->
                    <div class="col 6"style="text-align: left; margin-top: 10%" data-ng-if="getUserType() === 0">
                    <a data-ng-click="openModal('#addLesson')" class="waves-effect waves-light btn-medium modal-trigger center" >Add Lesson</a>
                    <div id="addLesson" class="modal modal-fixed-footer"  style="width: 30%; height: 40%;">
                        <div class="modal-content">
                            <h4>New Lesson</h4>
                            <form method="post" action="">
                                <div>
                                    <label for="newlesson" class="ui-hidden-accessible">Lesson Name</label>
                                    <input data-ng-model="lName" type="text" name="lesson" id="newlesson" placeholder="Lesson">
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <a  data-ng-click="addLesson(lName)" class=" modal-action modal-close waves-effect waves-green btn-flat">Add</a>
                            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
                        </div>
                    </div>
                </div>
                </div>

                <div data-ng-if="lessons.length ===0">
                    <p>
                        There are no lessons.
                    </p>
                </div>


                <!--<div data-ng-if="lessons.length > 0">-->
                    <ul id="lessonslist" class="collapsible" data-collapsible="accordion">
                        <li data-ng-repeat="less in lessons">
                             <div id="{{$index}}" class="collapsible-header" data-ng-click="setActiveLesson(less)">
                                 <b>{{less.name}}</b>
                             </div>
                             <div class="collapsible-body">
                                 <div class="collection">
                                     <div data-ng-repeat="video in less.videos">
                                         <a  data-ng-click="gotoAnchor(video.title) " class="collection-item"  style="margin-left: 20px">
                                             {{video.title}}
                                         </a>
                                     </div>

                                     <a data-ng-click="gotoAnchor('assignmentsanddocuments' +less.id)" class="collection-item" style="margin-left: 20px">
                                         Assignments and Documents
                                     </a>

                                 </div>
                             </div>
                         </li>
                    </ul>
                <!--</div>-->






            </div>

            <div class="col s12 m8">
                <div style="text-align: left; "  data-ng-if="getUserType() === 0">
                    <a data-ng-click="openModal('#addVideo')"  class="waves-effect waves-light btn-medium modal-trigger" >
                        Add Video
                    </a>
                </div>

                <div id="addVideo" class="modal modal-fixed-footer">
                    <div class="modal-content">
                        <h4>New Video</h4>
                        <form method="post" action="">
                            <div>
                                <ul>

                                    <li>
                                        <label for="newVideoTitle" class="ui-hidden-accessible">
                                            Title
                                        </label>
                                        <input data-ng-model="title" type="text" name="title" id="newVideoTitle" placeholder="Title">
                                    </li>

                                    <li>
                                        <label for="src" class="ui-hidden-accessible">
                                            Link
                                        </label>
                                        <input data-ng-model="src" type="text" name="title" id="src" placeholder="Title">
                                    </li>

                                </ul>

                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <a data-ng-click="addVideo(title,src)" class=" modal-action modal-close waves-effect waves-green btn-flat">Add</a>
                        <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>

                    </div>
                </div>
                <div id="videos" data-ng-repeat="video in getActiveLesson().videos">

                     <h4 >{{video.title}}
                         <a href="#!" class="secondary-content">
                             <i class="material-icons" data-ng-if="getUserType() === 0" >
                             delete
                             </i>
                         </a>
                     </h4>
                    <div class="video-container" id="{{video.title}}">
                        <iframe width="853" height="480" data-ng-src="{{trustSrc(getIframeSrc(video.url))}}" frameborder="0" allowfullscreen></iframe>
                    </div>
                        <ul class="collection">
                            <li class="collection-item avatar" data-ng-repeat="c in video.comments">
                                <i class="material-icons circle gray">face</i>
                                <span class="title"><b>{{getUserName(c.from)}}</b></span>
                                <p>{{c.text}}</p>
                                <a href="#" ng-if="isFavoriteOf(c.id, video.id)" class="secondary-content" data-ng-click="toggleFavorite(c.id, video.id)">
                                    <i class="material-icons yellow-text">star</i>
                                </a>
                                <a href="#" ng-if="!isFavoriteOf(c.id, video.id)" class="secondary-content" data-ng-click="toggleFavorite(c.id, video.id)">
                                    <i class="material-icons yellow-text">star_border</i>
                                </a>
                            </li>
                            <form ng-submit="sendComment(video.id)">
                                <div class="input-field col s12">
                                    <textarea ng-model="comment.text" id="textarea1" class="materialize-textarea"></textarea>
                                    <label for="textarea1">Comment</label>
                                </div>
                                <button class="btn waves-effect yellow black-text right" type="submit" name="action">Post
                                    <i class="material-icons right black-text">send</i>
                                </button>
                            </form>
                        </ul>
                </div>

                    <h4 id="assignmentsanddocuments{{getActiveLesson().id}}">Assignments and Documents</h4>
                    <div class="row">
                        <div style="text-align: left; " class="col 6" data-ng-if="getUserType() === 0">
                            <a data-ng-click="openModal('#addAssignment')" class="waves-effect waves-light btn-medium modal-trigger" >
                                Add Assignment
                            </a>
                        </div>
                        <div style="text-align: left; " class="col 6" data-ng-if="getUserType() === 0">
                            <a data-ng-click="openModal('#addDocument')"  class="waves-effect waves-light btn-medium modal-trigger" >
                                Add Document
                            </a>
                        </div>
                        <div id="addAssignment" class="modal modal-fixed-footer">
                            <div class="modal-content">
                                <h4>New Assignment</h4>
                                <form method="post" action="#addNewAssignment">
                                    <div>
                                        <ul>

                                            <li>
                                                <label for="newAssignmentTitle" class="ui-hidden-accessible">Title</label>
                                                <input type="text" name="title" id="newAssignmentTitle" placeholder="Title">
                                            </li>
                                            <li>
                                                <label for="assignment" class="ui-hidden-accessible">Attachment</label>
                                                <div id="assignment" class="file-field input-field">
                                                    <div class="btn">
                                                        <span>File</span>
                                                        <input type="file">
                                                    </div>
                                                    <div class="file-path-wrapper">
                                                        <input class="file-path validate" type="text">
                                                    </div>
                                                </div>

                                            </li>
                                            <li>
                                                <label for="deadlineDate" class="ui-hidden-accessible">Due Date</label>
                                                <input type="date" class="datepicker" name="deadlineDate" id="deadlineDate">
                                                <input type="time"  name="deadlineTime" id="deadlineTime">

                                            </li>
                                            <li>
                                                <label for="assignmentDescription">Description</label>
                                                <textarea id="assignmentDescription" class="materialize-textarea"></textarea>
                                            </li>
                                        </ul>

                                    </div>
                                </form>
                            </div>
                            <div class="modal-footer">
                                <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Add</a>
                                <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>

                            </div>
                        </div>

                        <div id="addDocument" class="modal modal-fixed-footer">
                            <div class="modal-content">
                                <h4>New Document</h4>

                            <form action="controllers.HomeController.uploadDocument" enctype="multipart/form-data">
                                    <ul>


                                        <li>
                                            <label for="newDocumentTitle" class="ui-hidden-accessible">Title</label>
                                            <input data-ng-model="dtitle" type="text" name="title" id="newDocumentTitle" placeholder="Title">
                                        </li>
                                        <li>
                                            <label for="attachment" class="ui-hidden-accessible">Attachment</label>
                                            <div id="attachment" class="file-field input-field">
                                                <div class="btn">
                                                    <span>File</span>
                                                    <input  data-ng-model="file" onchange="angular.element(this).scope().tempFile(this.files)" name="doc" type="file">
                                                </div>
                                                <div class="file-path-wrapper">
                                                    <input class="file-path validate" type="text">
                                                </div>
                                            </div>

                                        </li>
                                        <li>
                                            <label for="documentDescription">Description</label>
                                            <textarea data-ng-model="description" id="documentDescription" class="materialize-textarea"></textarea>
                                        </li>
                                    </ul>

                                </form>

                                <!--
                                <form method="post" action="routes.HomeController.uploadDocument">
                                    <div>
                                        <ul>


                                            <li>
                                                <label for="newDocumentTitle" class="ui-hidden-accessible">Title</label>
                                                <input type="text" name="title" id="newDocumentTitle" placeholder="Title">
                                            </li>
                                            <li>
                                                <label for="attachment" class="ui-hidden-accessible">Attachment</label>
                                                <div id="attachment" class="file-field input-field">
                                                    <div class="btn">
                                                        <span>File</span>
                                                        <input type="file">
                                                    </div>
                                                    <div class="file-path-wrapper">
                                                        <input class="file-path validate" type="text">
                                                    </div>
                                                </div>

                                            </li>
                                            <li>
                                                <label for="documentDescription">Description</label>
                                                <textarea id="documentDescription" class="materialize-textarea"></textarea>
                                            </li>
                                        </ul>

                                    </div>
                                </form>
                                -->
                            </div>
                            <div class="modal-footer">
                                <a data-ng-click="addDocument(dtitle,description, file)" class=" modal-action modal-close waves-effect waves-green btn-flat">Add</a>
                                <a href="" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>

                            </div>
                        </div>
                    </div>

                <ul class="collection" >
                    <div data-ng-repeat="assign in getActiveLesson().assignments">
                        <div data-ng-if="getUserType() === 0">

                            <li class="collection-item" ><div><a  ng-click="modalDetails(assign)" class="btn-small btn-flat modal-trigger center">{{assign.title}}</a> Due date: {{assign.deadline}}<a href="#delete" class="secondary-content"></a></div></li>
                        </div>
                        <div data-ng-if="getUserType() > 0">

                            <li class="collection-item" ><div ><a data-ng-href="https://drive.google.com/open?id=0B9otv9VO9QFJYnduWnU5ckFQeDg" class="btn-small btn-flat modal-trigger center" style="font-size: small">{{assign.title}}</a> Due date: {{assign.deadline}}<a href="#upload" class="secondary-content">Submit</a> </div></li>
                        </div>
                    </div>
                        <div id="modalDetails" class="modal modal-fixed-footer" style="width: 40%" >
                        <div class="modal-content" style="width: auto">
                            <h4>Submitted Assignments</h4>
                            <form method="post" action="#downloadAssignments">
                                <div>

                                    <ul class="collection with-header">
                                        <li class="collection-header"><h4>Select to Download</h4></li>
                                        <li class="collection-item" data-ng-repeat="submission in assign.submissions">
                                            <div class="row">
                                                <div class="col 6" >
                                                    <input type="checkbox" class="filled-in" id="filled-in-box{{$index}}" checked="checked" />
                                                    <label for="filled-in-box{{$index}}">{{submission.sName}} | Submitted {{submission.dateSubmitted}}</label>
                                                </div>

                                                <div class="col 6" >
                                                    <label for="user{{submission.sId}}" style="horiz-align: right;">Grade</label>
                                                    <input type="number" id="user{{submission.sId}}" min="0" max="100" class="validate" style="width:70px; height:30px; margin-bottom: 0px; horiz-align: right"  />
                                                </div>
                                            </div>
                                        </li>
                                    </ul>

                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Download</a>
                            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Submit Grades</a>
                            <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>

                        </div>
                    </div>
                        <div data-ng-if="getUserType() === 0">
                             <li class="collection-item" data-ng-repeat="doc in getActiveLesson().documents">
                                <div>
                                 <a  data-ng-href="file://{{doc.path}}" download="{{doc.title}}"  class="btn-flat btn-small">
                                       {{doc.title}}
                                </a>
                                    <a href="#!" class="secondary-content">
                                       <i class="material-icons"  >
                                           delete
                                       </i>
                                    </a>
                                </div>
                             </li>
                        </div>
                        <div data-ng-if="getUserType() > 0">
                            <li class="collection-item" data-ng-repeat="doc in getActiveLesson().documents">
                                <div>
                                    <a data-ng-href="file://{{doc.path}}" download="{{doc.title}}" class="btn-flat btn-small">
                                        {{doc.title}}
                                    </a>
                                </div>
                            </li>
                        </div>
                    <!--<li class="collection-item"><div><a class="btn-flat btn-small tooltipped" data-position="bottom" data-delay="50" data-tooltip="This is a description of the assignment. If you have 2 or more wrong exercises you will have zero in the assignment.">More Examples</a><a href="#!" class="secondary-content"><i class="material-icons">delete</i></a></div></li>-->
                </ul>
            </div>
        </div>
    </div>
</div>

<script>$('.collapsible').collapsible();</script>
<script>
    $(document).ready(function(){
        // the "href" attribute of .modal-trigger must specify the modal ID that wants to be triggered
        $('.modal-trigger').leanModal();
    });
</script>
<script>
         $('.datepicker').pickadate({
         selectMonths: true, // Creates a dropdown to control month
         selectYears: 15, // Creates a dropdown of 15 years to control year
             container: 'body'
         });
</script>
<script>
    $(document).ready(function(){
        $('.collapsible').collapsible({
            accordion : false // A setting that changes the collapsible behavior to expandable instead of the default accordion style
        });
    });
</script>
<script>
    $(document).ready(function() {
    $('select').material_select();
});
</script>
<script>
    $(document).ready(function(){
    $('.tooltipped').tooltip({delay: 50});
    });
</script>
<script>
    function prev(e) {
    e.preventDefault();
    }
</script>

<script>$(".button-collapse").sideNav();</script>

